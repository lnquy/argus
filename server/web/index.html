<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="chart"></div>
<script src="https://unpkg.com/frappe-charts@0.0.8/dist/frappe-charts.min.iife.js"></script>
<script>
    function dateToTimestamp(date) {
        date = date.replace(/-/g, '/');
        return new Date(date).getTime() / 1000;
    }

    let heatmap_raw_data = [
        {date: "2017-02-19", value: 0},
        {date: "2017-02-20", value: 0},
        {date: "2017-02-21", value: 0},
        {date: "2017-02-22", value: 0},
        {date: "2017-02-23", value: 0},
        {date: "2017-02-24", value: 0},
        {date: "2017-02-25", value: 0},
        {date: "2017-02-26", value: 0},
        {date: "2017-02-27", value: 0},
        {date: "2017-02-28", value: 0},
        {date: "2017-03-01", value: 0},
        {date: "2017-03-02", value: 0},
        {date: "2017-03-03", value: 0},
        {date: "2017-03-04", value: 0},
        {date: "2017-03-05", value: 0},
        {date: "2017-03-06", value: 1},
        {date: "2017-03-07", value: 0},
        {date: "2017-03-08", value: 1},
        {date: "2017-03-09", value: 0},
        {date: "2017-03-10", value: 0},
        {date: "2017-03-11", value: 0},
        {date: "2017-03-12", value: 0},
        {date: "2017-03-13", value: 0},
        {date: "2017-03-14", value: 0},
        {date: "2017-03-15", value: 0},
        {date: "2017-03-16", value: 0},
        {date: "2017-03-17", value: 0},
        {date: "2017-03-18", value: 0},
        {date: "2017-03-19", value: 0},
        {date: "2017-03-20", value: 0},
        {date: "2017-03-21", value: 0},
        {date: "2017-03-22", value: 0},
        {date: "2017-03-23", value: 0},
        {date: "2017-03-24", value: 0},
        {date: "2017-03-25", value: 0},
        {date: "2017-03-26", value: 0},
        {date: "2017-03-27", value: 0},
        {date: "2017-03-28", value: 0},
        {date: "2017-03-29", value: 0},
        {date: "2017-03-30", value: 0},
        {date: "2017-03-31", value: 0},
        {date: "2017-04-01", value: 0},
        {date: "2017-04-02", value: 0},
        {date: "2017-04-03", value: 0},
        {date: "2017-04-04", value: 0},
        {date: "2017-04-05", value: 0},
        {date: "2017-04-06", value: 0},
        {date: "2017-04-07", value: 0},
        {date: "2017-04-08", value: 0},
        {date: "2017-04-09", value: 0},
        {date: "2017-04-10", value: 0},
        {date: "2017-04-11", value: 0},
        {date: "2017-04-12", value: 2},
        {date: "2017-04-13", value: 0},
        {date: "2017-04-14", value: 3},
        {date: "2017-04-15", value: 0},
        {date: "2017-04-16", value: 0},
        {date: "2017-04-17", value: 2},
        {date: "2017-04-18", value: 1},
        {date: "2017-04-19", value: 4},
        {date: "2017-04-20", value: 1},
        {date: "2017-04-21", value: 1},
        {date: "2017-04-22", value: 0},
        {date: "2017-04-23", value: 1},
        {date: "2017-04-24", value: 2},
        {date: "2017-04-25", value: 3},
        {date: "2017-04-26", value: 3},
        {date: "2017-04-27", value: 0},
        {date: "2017-04-28", value: 0},
        {date: "2017-04-29", value: 0},
        {date: "2017-04-30", value: 0},
        {date: "2017-05-01", value: 0},
        {date: "2017-05-02", value: 0},
        {date: "2017-05-03", value: 0},
        {date: "2017-05-04", value: 0},
        {date: "2017-05-05", value: 0},
        {date: "2017-05-06", value: 0},
        {date: "2017-05-07", value: 0},
        {date: "2017-05-08", value: 0},
        {date: "2017-05-09", value: 0},
        {date: "2017-05-10", value: 0},
        {date: "2017-05-11", value: 0},
        {date: "2017-05-12", value: 0},
        {date: "2017-05-13", value: 0},
        {date: "2017-05-14", value: 0},
        {date: "2017-05-15", value: 0},
        {date: "2017-05-16", value: 0},
        {date: "2017-05-17", value: 0},
        {date: "2017-05-18", value: 0},
        {date: "2017-05-19", value: 0},
        {date: "2017-05-20", value: 0},
        {date: "2017-05-21", value: 0},
        {date: "2017-05-22", value: 0},
        {date: "2017-05-23", value: 0},
        {date: "2017-05-24", value: 0},
        {date: "2017-05-25", value: 0},
        {date: "2017-05-26", value: 0},
        {date: "2017-05-27", value: 0},
        {date: "2017-05-28", value: 2},
        {date: "2017-05-29", value: 1},
        {date: "2017-05-30", value: 0},
        {date: "2017-05-31", value: 1},
        {date: "2017-06-01", value: 0},
        {date: "2017-06-02", value: 0},
        {date: "2017-06-03", value: 0},
        {date: "2017-06-04", value: 0},
        {date: "2017-06-05", value: 0},
        {date: "2017-06-06", value: 0},
        {date: "2017-06-07", value: 0},
        {date: "2017-06-08", value: 0},
        {date: "2017-06-09", value: 0},
        {date: "2017-06-10", value: 0},
        {date: "2017-06-11", value: 0},
        {date: "2017-06-12", value: 0},
        {date: "2017-06-13", value: 0},
        {date: "2017-06-14", value: 0},
        {date: "2017-06-15", value: 0},
        {date: "2017-06-16", value: 0},
        {date: "2017-06-17", value: 0},
        {date: "2017-06-18", value: 0},
        {date: "2017-06-19", value: 0},
        {date: "2017-06-20", value: 0},
        {date: "2017-06-21", value: 0},
        {date: "2017-06-22", value: 0},
        {date: "2017-06-23", value: 0},
        {date: "2017-06-24", value: 0},
        {date: "2017-06-25", value: 0},
        {date: "2017-06-26", value: 0},
        {date: "2017-06-27", value: 3},
        {date: "2017-06-28", value: 0},
        {date: "2017-06-29", value: 0},
        {date: "2017-06-30", value: 0},
        {date: "2017-07-01", value: 0},
        {date: "2017-07-02", value: 0},
        {date: "2017-07-03", value: 2},
        {date: "2017-07-04", value: 0},
        {date: "2017-07-05", value: 0},
        {date: "2017-07-06", value: 0},
        {date: "2017-07-07", value: 0},
        {date: "2017-07-08", value: 2},
        {date: "2017-07-09", value: 1},
        {date: "2017-07-10", value: 2},
        {date: "2017-07-11", value: 8},
        {date: "2017-07-12", value: 4},
        {date: "2017-07-13", value: 1},
        {date: "2017-07-14", value: 3},
        {date: "2017-07-15", value: 0},
        {date: "2017-07-16", value: 2},
        {date: "2017-07-17", value: 2},
        {date: "2017-07-18", value: 3},
        {date: "2017-07-19", value: 0},
        {date: "2017-07-20", value: 0},
        {date: "2017-07-21", value: 0},
        {date: "2017-07-22", value: 0},
        {date: "2017-07-23", value: 0},
        {date: "2017-07-24", value: 0},
        {date: "2017-07-25", value: 0},
        {date: "2017-07-26", value: 1},
        {date: "2017-07-27", value: 1},
        {date: "2017-07-28", value: 0},
        {date: "2017-07-29", value: 0},
        {date: "2017-07-30", value: 0},
        {date: "2017-07-31", value: 0},
        {date: "2017-08-01", value: 0},
        {date: "2017-08-02", value: 0},
        {date: "2017-08-03", value: 0},
        {date: "2017-08-04", value: 0},
        {date: "2017-08-05", value: 0},
        {date: "2017-08-06", value: 0},
        {date: "2017-08-07", value: 0},
        {date: "2017-08-08", value: 0},
        {date: "2017-08-09", value: 0},
        {date: "2017-08-10", value: 0},
        {date: "2017-08-11", value: 0},
        {date: "2017-08-12", value: 0},
        {date: "2017-08-13", value: 0},
        {date: "2017-08-14", value: 0},
        {date: "2017-08-15", value: 0},
        {date: "2017-08-16", value: 0},
        {date: "2017-08-17", value: 0},
        {date: "2017-08-18", value: 0},
        {date: "2017-08-19", value: 0},
        {date: "2017-08-20", value: 0},
        {date: "2017-08-21", value: 0},
        {date: "2017-08-22", value: 0},
        {date: "2017-08-23", value: 2},
        {date: "2017-08-24", value: 6},
        {date: "2017-08-25", value: 0},
        {date: "2017-08-26", value: 0},
        {date: "2017-08-27", value: 0},
        {date: "2017-08-28", value: 10},
        {date: "2017-08-29", value: 0},
        {date: "2017-08-30", value: 6},
        {date: "2017-08-31", value: 2},
        {date: "2017-09-01", value: 0},
        {date: "2017-09-02", value: 0},
        {date: "2017-09-03", value: 0},
        {date: "2017-09-04", value: 0},
        {date: "2017-09-05", value: 0},
        {date: "2017-09-06", value: 0},
        {date: "2017-09-07", value: 0},
        {date: "2017-09-08", value: 0},
        {date: "2017-09-09", value: 0},
        {date: "2017-09-10", value: 0},
        {date: "2017-09-11", value: 0},
        {date: "2017-09-12", value: 0},
        {date: "2017-09-13", value: 0},
        {date: "2017-09-14", value: 0},
        {date: "2017-09-15", value: 0},
        {date: "2017-09-16", value: 0},
        {date: "2017-09-17", value: 0},
        {date: "2017-09-18", value: 0},
        {date: "2017-09-19", value: 0},
        {date: "2017-09-20", value: 0},
        {date: "2017-09-21", value: 1},
        {date: "2017-09-22", value: 7},
        {date: "2017-09-23", value: 5},
        {date: "2017-09-24", value: 1},
        {date: "2017-09-25", value: 4},
        {date: "2017-09-26", value: 2},
        {date: "2017-09-27", value: 0},
        {date: "2017-09-28", value: 0},
        {date: "2017-09-29", value: 0},
        {date: "2017-09-30", value: 0},
        {date: "2017-10-01", value: 0},
        {date: "2017-10-02", value: 0},
        {date: "2017-10-03", value: 0},
        {date: "2017-10-04", value: 2},
        {date: "2017-10-05", value: 0},
        {date: "2017-10-06", value: 0},
        {date: "2017-10-07", value: 0},
        {date: "2017-10-08", value: 9},
        {date: "2017-10-09", value: 4},
        {date: "2017-10-10", value: 0},
        {date: "2017-10-11", value: 6},
        {date: "2017-10-12", value: 1},
        {date: "2017-10-13", value: 0},
        {date: "2017-10-14", value: 0},
        {date: "2017-10-15", value: 0},
        {date: "2017-10-16", value: 0},
        {date: "2017-10-17", value: 0},
        {date: "2017-10-18", value: 0},
        {date: "2017-10-19", value: 0},
        {date: "2017-10-20", value: 0},
        {date: "2017-10-21", value: 0},
        {date: "2017-10-22", value: 0},
        {date: "2017-10-23", value: 0},
        {date: "2017-10-24", value: 2},
        {date: "2017-10-25", value: 0},
        {date: "2017-10-26", value: 0},
        {date: "2017-10-27", value: 0},
        {date: "2017-10-28", value: 0},
        {date: "2017-10-29", value: 0},
        {date: "2017-10-30", value: 0},
        {date: "2017-10-31", value: 0},
        {date: "2017-11-01", value: 0},
        {date: "2017-11-02", value: 0},
        {date: "2017-11-03", value: 0},
        {date: "2017-11-04", value: 0},
        {date: "2017-11-05", value: 0},
        {date: "2017-11-06", value: 0},
        {date: "2017-11-07", value: 0},
        {date: "2017-11-08", value: 0},
        {date: "2017-11-09", value: 0},
        {date: "2017-11-10", value: 0},
        {date: "2017-11-11", value: 0},
        {date: "2017-11-12", value: 0},
        {date: "2017-11-13", value: 0},
        {date: "2017-11-14", value: 0},
        {date: "2017-11-15", value: 8},
        {date: "2017-11-16", value: 0},
        {date: "2017-11-17", value: 0},
        {date: "2017-11-18", value: 0},
        {date: "2017-11-19", value: 0},
        {date: "2017-11-20", value: 0},
        {date: "2017-11-21", value: 0},
        {date: "2017-11-22", value: 0},
        {date: "2017-11-23", value: 0},
        {date: "2017-11-24", value: 0},
        {date: "2017-11-25", value: 0},
        {date: "2017-11-26", value: 0},
        {date: "2017-11-27", value: 0},
        {date: "2017-11-28", value: 0},
        {date: "2017-11-29", value: 0},
        {date: "2017-11-30", value: 0},
        {date: "2017-12-01", value: 0},
        {date: "2017-12-02", value: 0},
        {date: "2017-12-03", value: 0},
        {date: "2017-12-04", value: 0},
        {date: "2017-12-05", value: 0},
        {date: "2017-12-06", value: 0},
        {date: "2017-12-07", value: 0},
        {date: "2017-12-08", value: 0},
        {date: "2017-12-09", value: 0},
        {date: "2017-12-10", value: 0},
        {date: "2017-12-11", value: 0},
        {date: "2017-12-12", value: 0},
        {date: "2017-12-13", value: 0},
        {date: "2017-12-14", value: 0},
        {date: "2017-12-15", value: 0},
        {date: "2017-12-16", value: 0},
        {date: "2017-12-17", value: 0},
        {date: "2017-12-18", value: 0},
        {date: "2017-12-19", value: 0},
        {date: "2017-12-20", value: 0},
        {date: "2017-12-21", value: 0},
        {date: "2017-12-22", value: 0},
        {date: "2017-12-23", value: 0},
        {date: "2017-12-24", value: 0},
        {date: "2017-12-25", value: 0},
        {date: "2017-12-26", value: 0},
        {date: "2017-12-27", value: 0},
        {date: "2017-12-28", value: 0},
        {date: "2017-12-29", value: 0},
        {date: "2017-12-30", value: 0},
        {date: "2017-12-31", value: 0},
        {date: "2018-01-01", value: 0},
        {date: "2018-01-02", value: 0},
        {date: "2018-01-03", value: 0},
        {date: "2018-01-04", value: 3},
        {date: "2018-01-05", value: 0},
        {date: "2018-01-06", value: 0},
        {date: "2018-01-07", value: 0},
        {date: "2018-01-08", value: 0},
        {date: "2018-01-09", value: 0},
        {date: "2018-01-10", value: 0},
        {date: "2018-01-11", value: 0},
        {date: "2018-01-12", value: 0},
        {date: "2018-01-13", value: 0},
        {date: "2018-01-14", value: 0},
        {date: "2018-01-15", value: 0},
        {date: "2018-01-16", value: 0},
        {date: "2018-01-17", value: 0},
        {date: "2018-01-18", value: 0},
        {date: "2018-01-19", value: 0},
        {date: "2018-01-20", value: 0},
        {date: "2018-01-21", value: 0},
        {date: "2018-01-22", value: 0},
        {date: "2018-01-23", value: 0},
        {date: "2018-01-24", value: 0},
        {date: "2018-01-25", value: 0},
        {date: "2018-01-26", value: 0},
        {date: "2018-01-27", value: 0},
        {date: "2018-01-28", value: 0},
        {date: "2018-01-29", value: 0},
        {date: "2018-01-30", value: 0},
        {date: "2018-01-31", value: 0},
        {date: "2018-02-01", value: 0},
        {date: "2018-02-02", value: 0},
        {date: "2018-02-03", value: 0},
        {date: "2018-02-04", value: 0},
        {date: "2018-02-05", value: 0},
        {date: "2018-02-06", value: 0},
        {date: "2018-02-07", value: 0},
        {date: "2018-02-08", value: 0},
        {date: "2018-02-09", value: 0},
        {date: "2018-02-10", value: 3},
        {date: "2018-02-11", value: 1},
        {date: "2018-02-12", value: 6},
        {date: "2018-02-13", value: 11},
        {date: "2018-02-14", value: 10},
        {date: "2018-02-15", value: 8},
        {date: "2018-02-16", value: 7},
        {date: "2018-02-17", value: 5},
        {date: "2018-02-18", value: 1},
        {date: "2018-02-19", value: 2},
        {date: "2018-02-20", value: 0},
        {date: "2018-02-21", value: 1},
        {date: "2018-02-22", value: 0},
        {date: "2018-02-23", value: 0},
        {date: "2018-02-24", value: 0},
        {date: "2018-02-25", value: 4},
        {date: "2018-02-26", value: 0},
        {date: "2018-02-27", value: 2},
        {date: "2018-02-28", value: 1}
    ];

    let heatmap_data = {};
    for (let i = 0; i < heatmap_raw_data.length; i++) {
        let ts = dateToTimestamp(heatmap_raw_data[i].date);
        ts = Math.floor(ts - (ts % 86400)).toFixed(1); // convert to midnight
        console.log(ts);
        heatmap_data[parseInt(ts)] = heatmap_raw_data[i].value;
    }
    console.log("DATA: ", heatmap_data);

    // let heatmap_data = {};
    // let current_date = new Date();
    // let timestamp = current_date.getTime() / 1000;
    // timestamp = Math.floor(timestamp - (timestamp % 86400)).toFixed(1); // convert to midnight
    // for (let i = 0; i < 375; i++) {
    //     heatmap_data[parseInt(timestamp)] = Math.floor(Math.random() * 5);
    //     timestamp = Math.floor(timestamp - 86400).toFixed(1);
    // }

    setTimeout(function () {
        let d = new Date();
        d.setFullYear(d.getFullYear() - 1);
        let hm = new Chart({
            parent: "#chart",
            type: 'heatmap',
            height: 300,
            data: heatmap_data,  // object with date/timestamp-value pairs

            discrete_domains: 0,  // default: 0

            // start: d,
            // A Date object;
            // default: today's date in past year
            //          for an annual heatmap

            // legend_colors: ['#ebedf0', '#fdf436', '#ffc700', '#ff9100', '#06001c'],
            // Set of five incremental colors,
            // beginning with a low-saturation color for zero data;
            // default: ['#ebedf0', '#c6e48b', '#7bc96f', '#239a3b', '#196127']

        });

        console.log("HM", hm);
    }, 100);
</script>

</body>
</html>
