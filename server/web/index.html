<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="chart"></div>
<script src="https://unpkg.com/frappe-charts@0.0.8/dist/frappe-charts.min.iife.js"></script>
<script>
    function dateToTimestamp(date) {
        date = date.replace(/-/g, '/');
        return new Date(date).getTime() / 1000;
    }

    let heatmap_raw_data = {"2017-03-08":2,"2017-04-01":6,"2017-04-06":6,"2017-04-07":4,"2017-04-08":1,"2017-04-09":1,"2017-04-10":2,"2017-04-11":3,"2017-04-12":9,"2017-04-13":2,"2017-04-14":9,"2017-04-15":5,"2017-04-16":7,"2017-04-17":8,"2017-04-18":5,"2017-04-19":11,"2017-04-20":6,"2017-04-21":7,"2017-04-22":6,"2017-04-23":5,"2017-04-24":8,"2017-04-25":7,"2017-04-26":8,"2017-04-27":2,"2017-04-28":1,"2017-04-29":2,"2017-04-30":7,"2017-05-01":3,"2017-05-02":2,"2017-05-03":3,"2017-05-04":5,"2017-05-05":4,"2017-05-06":11,"2017-05-07":6,"2017-05-08":2,"2017-05-09":3,"2017-05-10":7,"2017-05-11":5,"2017-05-12":4,"2017-05-13":1,"2017-05-14":5,"2017-05-15":4,"2017-05-16":1,"2017-05-17":1,"2017-05-28":9,"2017-05-29":2,"2017-05-30":1,"2017-05-31":2,"2017-06-03":2,"2017-06-04":4,"2017-06-05":3,"2017-06-06":1,"2017-06-08":1,"2017-06-09":1,"2017-06-10":1,"2017-06-11":1,"2017-06-12":1,"2017-06-23":1,"2017-06-24":7,"2017-06-25":10,"2017-06-26":3,"2017-06-27":8,"2017-06-28":4,"2017-06-29":4,"2017-06-30":4,"2017-07-01":3,"2017-07-02":5,"2017-07-03":5,"2017-07-04":7,"2017-07-05":3,"2017-07-06":2,"2017-07-07":3,"2017-07-08":4,"2017-07-09":2,"2017-07-10":4,"2017-07-11":8,"2017-07-12":4,"2017-07-13":1,"2017-07-14":3,"2017-07-16":2,"2017-07-17":4,"2017-07-18":4,"2017-07-19":6,"2017-07-20":6,"2017-07-22":3,"2017-07-26":3,"2017-07-27":2,"2017-08-03":2,"2017-08-04":5,"2017-08-05":7,"2017-08-06":6,"2017-08-07":9,"2017-08-08":3,"2017-08-15":2,"2017-08-23":2,"2017-08-24":6,"2017-08-28":10,"2017-08-30":6,"2017-08-31":2,"2017-09-18":6,"2017-09-19":3,"2017-09-21":3,"2017-09-22":14,"2017-09-23":10,"2017-09-24":2,"2017-09-25":8,"2017-09-26":4,"2017-10-04":2,"2017-10-08":9,"2017-10-09":4,"2017-10-11":6,"2017-10-12":1,"2017-10-16":3,"2017-10-17":6,"2017-10-18":5,"2017-10-19":5,"2017-10-20":6,"2017-10-21":2,"2017-10-22":1,"2017-10-24":4,"2017-10-29":2,"2017-10-31":3,"2017-11-01":9,"2017-11-02":2,"2017-11-03":6,"2017-11-05":11,"2017-11-06":1,"2017-11-07":3,"2017-11-08":11,"2017-11-09":3,"2017-11-10":6,"2017-11-11":4,"2017-11-12":3,"2017-11-13":7,"2017-11-14":2,"2017-11-15":19,"2017-11-16":5,"2017-11-17":8,"2017-11-18":6,"2017-11-19":6,"2017-11-20":2,"2017-11-21":3,"2017-11-22":3,"2017-11-23":4,"2017-11-24":3,"2017-11-25":3,"2017-11-27":5,"2017-11-28":1,"2017-11-30":1,"2017-12-12":9,"2017-12-13":1,"2017-12-14":6,"2017-12-15":14,"2017-12-18":13,"2017-12-19":5,"2017-12-20":6,"2017-12-21":19,"2017-12-22":9,"2017-12-23":10,"2017-12-24":14,"2017-12-25":17,"2017-12-26":16,"2017-12-27":4,"2017-12-28":8,"2017-12-29":8,"2017-12-31":3,"2018-01-02":5,"2018-01-03":8,"2018-01-04":21,"2018-01-05":7,"2018-01-06":4,"2018-01-07":11,"2018-01-08":3,"2018-01-09":5,"2018-01-10":14,"2018-01-11":8,"2018-01-12":1,"2018-01-14":2,"2018-01-15":2,"2018-01-16":1,"2018-01-18":4,"2018-01-19":4,"2018-01-21":3,"2018-01-22":4,"2018-01-23":5,"2018-01-24":7,"2018-01-25":8,"2018-01-26":13,"2018-01-29":2,"2018-01-30":2,"2018-02-05":2,"2018-02-06":4,"2018-02-07":7,"2018-02-08":4,"2018-02-09":4,"2018-02-10":3,"2018-02-11":1,"2018-02-12":6,"2018-02-13":11,"2018-02-14":10,"2018-02-15":8,"2018-02-16":7,"2018-02-17":5,"2018-02-18":1,"2018-02-19":2,"2018-02-21":1,"2018-02-25":4,"2018-02-27":5,"2018-02-28":2,"2018-03-01":1,"2018-03-05":1,"2018-03-06":2};

    let heatmap_data = {};
    for (var key in heatmap_raw_data) {
        if (heatmap_raw_data.hasOwnProperty(key)) {
            let ts = dateToTimestamp(key);
            ts = Math.floor(ts - (ts % 86400)).toFixed(1); // To midnight
            heatmap_data[parseInt(ts)] = heatmap_raw_data[key];
        }
    }
    console.log("DATA: ", heatmap_data);

    // let d = new Date();
    // d.setFullYear(d.getFullYear() - 1);
    let hm = new Chart({
        parent: "#chart",
        type: 'heatmap',
        height: 300,
        data: heatmap_data,
        discrete_domains: 0,

        // start: d,
        // A Date object;
        // default: today's date in past year
        //          for an annual heatmap

        // legend_colors: ['#ebedf0', '#fdf436', '#ffc700', '#ff9100', '#06001c'],
        // Set of five incremental colors,
        // beginning with a low-saturation color for zero data;
        //default: ['#ebedf0', '#c6e48b', '#7bc96f', '#239a3b', '#196127']
    });
</script>

</body>
</html>
